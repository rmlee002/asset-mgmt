{"ast":null,"code":"import _classCallCheck from \"/mnt/c/Users/Ryan Lee/Documents/new mgmt/app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/mnt/c/Users/Ryan Lee/Documents/new mgmt/app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/mnt/c/Users/Ryan Lee/Documents/new mgmt/app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/mnt/c/Users/Ryan Lee/Documents/new mgmt/app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/mnt/c/Users/Ryan Lee/Documents/new mgmt/app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/mnt/c/Users/Ryan Lee/Documents/new mgmt/app/src/components/protect.jsx\";\nimport React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport axios from 'axios';\nexport default function protect(Comp) {\n  return (\n    /*#__PURE__*/\n    function (_Component) {\n      _inherits(_class, _Component);\n\n      function _class() {\n        var _this;\n\n        _classCallCheck(this, _class);\n\n        _this = _possibleConstructorReturn(this, _getPrototypeOf(_class).call(this));\n        _this.state = {\n          loading: true,\n          redirect: false\n        };\n        return _this;\n      }\n\n      _createClass(_class, [{\n        key: \"componentDidMount\",\n        value: function componentDidMount() {\n          var _this2 = this;\n\n          axios.get('/checkToken').then(function (res) {\n            if (res.status === 200) {\n              _this2.setState({\n                loading: false\n              });\n            } else {\n              var error = new Error(res.error);\n            }\n          }).catch(function (err) {\n            console.error(err);\n\n            _this2.setState({\n              loading: false,\n              redirect: true\n            });\n          });\n        }\n      }, {\n        key: \"render\",\n        value: function render() {\n          var _this$state = this.state,\n              loading = _this$state.loading,\n              redirect = _this$state.redirect;\n          var view = React.createElement(\"h1\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 35\n            },\n            __self: this\n          }, \"Loading...\");\n\n          if (!loading) {\n            if (redirect) {\n              alert('should redirect');\n              view = React.createElement(Redirect, {\n                to: \"/login\",\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 39\n                },\n                __self: this\n              });\n            } else {\n              alert('should show home');\n              view = React.createElement(Comp, Object.assign({}, this.props, {\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 43\n                },\n                __self: this\n              }));\n            }\n          }\n\n          return React.createElement(React.Fragment, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 47\n            },\n            __self: this\n          }, view);\n        }\n      }]);\n\n      return _class;\n    }(Component)\n  );\n}","map":{"version":3,"sources":["/mnt/c/Users/Ryan Lee/Documents/new mgmt/app/src/components/protect.jsx"],"names":["React","Component","Redirect","axios","protect","Comp","state","loading","redirect","get","then","res","status","setState","error","Error","catch","err","console","view","alert","props"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,QAAT,QAAyB,kBAAzB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,eAAe,SAASC,OAAT,CAAiBC,IAAjB,EAAuB;AACrC;AAAA;AAAA;AAAA;;AACC,wBAAc;AAAA;;AAAA;;AACb;AACA,cAAKC,KAAL,GAAa;AACZC,UAAAA,OAAO,EAAE,IADG;AAEZC,UAAAA,QAAQ,EAAE;AAFE,SAAb;AAFa;AAMb;;AAPF;AAAA;AAAA,4CASoB;AAAA;;AAClBL,UAAAA,KAAK,CAACM,GAAN,CAAU,aAAV,EACEC,IADF,CACO,UAAAC,GAAG,EAAI;AACZ,gBAAIA,GAAG,CAACC,MAAJ,KAAe,GAAnB,EAAuB;AACtB,cAAA,MAAI,CAACC,QAAL,CAAc;AAACN,gBAAAA,OAAO,EAAE;AAAV,eAAd;AACA,aAFD,MAGI;AACH,kBAAMO,KAAK,GAAG,IAAIC,KAAJ,CAAUJ,GAAG,CAACG,KAAd,CAAd;AACA;AACD,WARF,EAQIE,KARJ,CAQU,UAAAC,GAAG,EAAI;AACfC,YAAAA,OAAO,CAACJ,KAAR,CAAcG,GAAd;;AACA,YAAA,MAAI,CAACJ,QAAL,CAAc;AACbN,cAAAA,OAAO,EAAE,KADI;AAEbC,cAAAA,QAAQ,EAAE;AAFG,aAAd;AAIA,WAdF;AAeA;AAzBF;AAAA;AAAA,iCA2BU;AAAA,4BACsB,KAAKF,KAD3B;AAAA,cACAC,OADA,eACAA,OADA;AAAA,cACSC,QADT,eACSA,QADT;AAER,cAAIW,IAAI,GAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAAX;;AACA,cAAI,CAACZ,OAAL,EAAa;AACZ,gBAAIC,QAAJ,EAAc;AACbY,cAAAA,KAAK,CAAC,iBAAD,CAAL;AACAD,cAAAA,IAAI,GAAG,oBAAC,QAAD;AAAU,gBAAA,EAAE,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAAP;AACA,aAHD,MAII;AACHC,cAAAA,KAAK,CAAC,kBAAD,CAAL;AACAD,cAAAA,IAAI,GAAG,oBAAC,IAAD,oBAAU,KAAKE,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAP;AACA;AACD;;AACD,iBACC,oBAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACEF,IADF,CADD;AAKA;AA7CF;;AAAA;AAAA,MAAqBlB,SAArB;AAAA;AA+CA","sourcesContent":["import React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport axios from 'axios';\n\nexport default function protect(Comp) {\n\treturn class extends Component {\n\t\tconstructor() {\n\t\t\tsuper();\n\t\t\tthis.state = {\n\t\t\t\tloading: true,\n\t\t\t\tredirect: false\n\t\t\t};\n\t\t}\n\n\t\tcomponentDidMount(){\n\t\t\taxios.get('/checkToken')\n\t\t\t\t.then(res => {\n\t\t\t\t\tif (res.status === 200){\n\t\t\t\t\t\tthis.setState({loading: false});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tconst error = new Error(res.error);\n\t\t\t\t\t}\n\t\t\t\t}).catch(err => {\n\t\t\t\t\tconsole.error(err);\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tloading: false,\n\t\t\t\t\t\tredirect: true\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t}\n\n\t\trender() {\t\t\t\n\t\t\tconst { loading, redirect } = this.state;\n\t\t\tlet view = <h1>Loading...</h1>\n\t\t\tif (!loading){\n\t\t\t\tif (redirect) {\n\t\t\t\t\talert('should redirect')\n\t\t\t\t\tview = <Redirect to=\"/login\" />\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\talert('should show home')\n\t\t\t\t\tview = <Comp {...this.props} />\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn(\n\t\t\t\t<React.Fragment>\n\t\t\t\t\t{view}\n\t\t\t\t</React.Fragment>\n\t\t\t);\n\t\t}\n\t}\n}"]},"metadata":{},"sourceType":"module"}